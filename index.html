<input type="hidden" id="x-contentItemKey" value="[x-contentItemKey]" />
<input type="hidden" id="x-contentKey" value="[x-contentKey]" />

<script>
  const contentKey = jQuery("#x-contentKey").val();
  const contentItemKey = jQuery("#x-contentItemKey").val();

  const getIpartSettings = async () => {
    const getSettings = await fetch(
      `${window.location.origin}/api/ContentItem?contentKey=${contentKey}&contentItemKey=${contentItemKey}`,
      {
        method: "GET",
        headers: { RequestVerificationToken: jQuery("#__RequestVerificationToken").val() },
      }
    );
    const data = await getSettings.json();
    return await data.Items.$values[0].Data.Settings.Region_1.IQAPath
  };

  const getIqaData = async (iqaPath) => {
    const getData = await fetch(`${window.location.origin}/api/query?queryname=${iqaPath}`, {
      method: "GET",
      headers: { RequestVerificationToken: jQuery("#__RequestVerificationToken").val() },
    });
    const data = await getData.json();
    console.log(data);
  };

  getIpartSettings().then((path) => {
    getIqaData(path);
  });
</script>

<div></div>
